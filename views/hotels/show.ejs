<%- include('../partials/header.ejs') %>

    <!-- Page content-->
    <!-- Page header-->
    <section class="container pt-5 mt-5">
        <!-- Breadcrumb-->
        <nav class="mb-3 pt-md-3" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/hotels">Find accommodation</a></li>
                <li class="breadcrumb-item active" aria-current="page">
                    <%= hotel.name %>
                </li>
            </ol>
        </nav>
        <div class="d-sm-flex align-items-center justify-content-between mb-4 pb-sm-2">
            <h1 class="h2 me-3 mb-sm-0">
                <%= hotel.name %>
            </h1>
            <div class="text-nowrap">
              <% if (hotel.upVotes.indexOf(currentUser._id) != -1) { %>
                <a class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle" type="button" href="/hotels/<%= hotel._id %>/upvote"
                    data-bs-toggle="tooltip" title="Add to Liked">
                    <i class="fi-like like-col"></i>
                </a>
              <% } else {%>
                <a class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle" type="button" href="/hotels/<%= hotel._id %>/upvote"
                    data-bs-toggle="tooltip" title="Add to Liked">
                    <i class="fi-like"></i>
                </a>
              <% } %>

                <% if (hotel.downVotes.indexOf(currentUser._id) != -1) { %>
                  <a class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle a-dislike" type="button" href="/hotels/<%= hotel._id %>/downvote"
                      data-bs-toggle="tooltip" title="Add to Disliked">
                      <i class="fi-dislike dis-col"></i>
                  </a>
                  <% } else {%>
                    <a class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle" type="button" href="/hotels/<%= hotel._id %>/downvote"
                        data-bs-toggle="tooltip" title="Add to Disliked">
                        <i class="fi-dislike"></i>
                    </a>
                <% } %>
                <div class="dropdown d-inline-block" data-bs-toggle="tooltip" title="Share">
                    <button class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle ms-2" type="button"
                        data-bs-toggle="dropdown"><i class="fi-share"></i></button>
                    <div class="dropdown-menu dropdown-menu-end my-1">
                        <button class="dropdown-item" type="button"><i
                                class="fi-facebook fs-base opacity-75 me-2"></i>Facebook</button>
                        <button class="dropdown-item" type="button"><i
                                class="fi-twitter fs-base opacity-75 me-2"></i>Twitter</button>
                        <button class="dropdown-item" type="button"><i
                                class="fi-instagram fs-base opacity-75 me-2"></i>Instagram</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Nav pills-->
        <ul class="nav nav-pills border-bottom pb-3 mb-4">
            <li class="nav-item"><a class="nav-link d-flex align-items-center active" href="#"><i
                        class="fi-image me-2"></i>Gallery</a></li>
            <li class="nav-item"><a class="nav-link d-flex align-items-center" href="#aboutHere"><i
                        class="fi-info-circle me-2"></i>Info</a></li>
            <li class="nav-item"><a class="nav-link d-flex align-items-center" href="#hotel-review"><i
                        class="fi-edit me-2"></i>Reviews</a></li>
        </ul>
    </section>

    <!-- Gallery-->
    <section class="container overflow-auto mb-5" data-simplebar>
        <div class="row g-2 g-md-3 gallery" data-thumbnails="true" style="min-width: 30rem;">
            <div class="col-8">
                <% if (hotel.images.length > 0) { %>
                  <a class="gallery-item rounded rounded-md-3" href="<%= hotel.images[0].url %>"
                    data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Kids bed&lt;/h6&gt;">
                    <img src="<%= hotel.images[0].url %>" alt="Gallery thumbnail" style="max-width: 858px;max-height: 392px;">
                </a>
                <% } else { %>
                  <a class="gallery-item rounded rounded-md-3" href="/Img/no-image-available-icon-6.png"
                    data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Kids bed&lt;/h6&gt;">
                    <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 858px;max-height: 392px;">
                </a>
                <% } %>
            </div>
            <div class="col-4">
              <% if (hotel.images.length > 1) { %>
                <a class="gallery-item rounded rounded-md-3 mb-2 mb-md-3" href="<%= hotel.images[1].url %>"
                  data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Kids bed&lt;/h6&gt;">
                  <img src="<%= hotel.images[1].url %>" alt="Gallery thumbnail" style="max-width: 420px;max-height: 192px;">
                </a>
              <% } else { %>
                <a class="gallery-item rounded rounded-md-3 mb-2 mb-md-3" href="/Img/no-image-available-icon-6.png"
                  data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Kids bed&lt;/h6&gt;">
                  <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 420px;max-height: 192px;">
                </a>
              <% } %>

              <% if (hotel.images.length > 2) { %>
                <a class="gallery-item rounded rounded-md-3" href="<%= hotel.images[2].url %>"
                  data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Working desk&lt;/h6&gt;">
                  <img src="<%= hotel.images[2].url %>" alt="Gallery thumbnail" style="max-width: 420px;max-height: 192px;">
                </a>
              <% } else { %>
                <a class="gallery-item rounded rounded-md-3" href="/Img/no-image-available-icon-6.png"
                  data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Working desk&lt;/h6&gt;">
                  <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 420px;max-height: 192px;">
                </a>
              <% } %>
            </div>
            <div class="col-12">
              <div class="row g-2 g-md-3">
                  <div class="col">
                    <% if (hotel.images.length > 3) { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="<%= hotel.images[3].url %>"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Working desk&lt;/h6&gt;">
                          <img src="<%= hotel.images[3].url %>" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                    <% } else { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="/Img/no-image-available-icon-6.png"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Working desk&lt;/h6&gt;">
                          <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                    <% } %>
                  </div>
                  <div class="col">
                    <% if (hotel.images.length > 4) { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="<%= hotel.images[4].url %>"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;King size bed&lt;/h6&gt;">
                          <img src="<%= hotel.images[4].url %>" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                      <% } else { %>
                        <a class="gallery-item rounded-1 rounded-md-2" href="/Img/no-image-available-icon-6.png"
                            data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;King size bed&lt;/h6&gt;">
                            <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                        </a>
                      <% } %>
                  </div>
                  <div class="col">
                    <% if (hotel.images.length > 5) { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="<%= hotel.images[5].url %>"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Towels&lt;/h6&gt;">
                          <img src="<%= hotel.images[5].url %>" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                      <% } else { %>
                        <a class="gallery-item rounded-1 rounded-md-2" href="/Img/no-image-available-icon-6.png"
                            data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Towels&lt;/h6&gt;">
                            <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                        </a>
                      <% } %>
                  </div>
                  <div class="col">
                    <% if (hotel.images.length > 6) { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="<%= hotel.images[6].url %>"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Bathroom&lt;/h6&gt;">
                          <img src="<%= hotel.images[6].url %>" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                      <% } else { %>
                        <a class="gallery-item rounded-1 rounded-md-2" href="/Img/no-image-available-icon-6.png"
                            data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Bathroom&lt;/h6&gt;">
                            <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                        </a>
                    <% } %>
                  </div>
                  <div class="col">
                    <% if (hotel.images.length > 7) { %>
                      <a class="gallery-item rounded-1 rounded-md-2" href="<%= hotel.images[7].url %>"
                          data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Bathroom&lt;/h6&gt;">
                          <img src="<%= hotel.images[7].url %>" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                      </a>
                      <% } else { %>
                        <a class="gallery-item rounded-1 rounded-md-2" href="/Img/no-image-available-icon-6.png"
                            data-sub-html="&lt;h6 class=&quot;fs-sm text-light&quot;&gt;Bathroom&lt;/h6&gt;">
                            <img src="/Img/no-image-available-icon-6.png" alt="Gallery thumbnail" style="max-width: 246px;max-height: 112px;">
                        </a>
                    <% } %>
                  </div>
              </div>
          </div>
        </div>
    </section>
    <!-- Page content-->
    <section class="container pb-5 mb-md-4">
        <div class="row">
            <div class="col-md-7 mb-md-0 mb-3">
                <div class="card py-2 px-sm-4 px-3 shadow-sm">
                    <div class="card-body mx-n2">
                        <!-- Place info-->
                        <div class="d-flex align-items-start mb-3 pb-3 border-bottom"><img
                                src="/img/city-guide/brands/hotel.svg" width="60" alt="Thumbnail">
                            <div class="ps-2 ms-1">
                                <h3 class="h5 mb-2">
                                    <%= hotel.name %>
                                </h3>
                                <ul class="list-unstyled d-flex flex-wrap fs-sm">
                                    <li class="me-2 mb-1 pe-1"><i
                                            class="fi-star-filled mt-n1 me-1 text-warning align-middle opacity-70"></i><b>
                                            <%= hotel.overAllRating %>
                                        </b>(<%= hotel.reviews.length%>)</li>
                                    <li class="me-2 mb-1 pe-1"><i
                                            class="fi-wallet mt-n1 me-1 align-middle opacity-70"></i>
                                        <%= hotel.price %>&nbsp;$
                                    </li>
                                    <li class="me-2 mb-1 pe-1"><i
                                            class="fi-map-pin mt-n1 me-1 align-middle opacity-70"></i>
                                        <%= hotel.address %>
                                    </li>
                                    <li class="me-2 mb-1 pe-1">
                                        <i class="fi-calendar mt-n1 me-1 align-middle opacity-70"></i>Created At :  <%= moment(hotel.createdAt).fromNow() %> %>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- Place contacts-->
                        <div class="mb-3 pb-3 border-bottom">
                            <h4 class="h5 mb-2">Contacts:</h4>
                            <ul class="nav row row-cols-sm-2 row-cols-1 gy-1">
                                <li class="col"><a class="nav-link p-0 fw-normal d-flex align-items-start" href="#"><i
                                            class="fi-map-pin mt-1 me-2 align-middle opacity-70"></i></i>
                                        <%= hotel.address %>
                                    </a></li>
                                <li class="col"><a
                                        class="nav-link d-inline-block p-0 fw-normal d-inline-flex align-items-start"
                                        href="tel:3025550107"><i
                                            class="fi-phone mt-1 me-2 align-middle opacity-70"></i>(000)
                                        000-0000</a>, <a class="nav-link d-inline-block p-0 fw-normal"
                                        href="tel:3025550208">(000) 000-0000</a></li>
                                <li class="col"><a class="nav-link p-0 fw-normal d-flex align-items-start" href="#"><i
                                            class="fi-globe mt-1 me-2 align-middle opacity-60"></i>myWebsite.com</a>
                                </li>
                                <li class="col">
                                    <a class="nav-link p-0 fw-normal d-flex align-items-start"
                                        href="/users/<%= hotel.author._id %>">
                                        <i class="fi-mail mt-1 me-2 align-middle opacity-70"></i>
                                        <%= hotel.author.username %>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- Place pricing-->
                        <div class="mb-3 pb-3 border-bottom">
                            <div class="row row-cols-sm-2 row-cols-1">
                                <div class="col mb-sm-0 mb-3">
                                    <h4 class="h5 mb-0"><span class="fs-4">&#8377</i>
                                            <%= hotel.price %>&nbsp;
                                        </span>
                                        <span class="fs-base fw-normal text-body">/night</span>
                                    </h4>
                                    <% if (hotel.isRoomAvailable) { %>
                                        <span>Room Available</span>
                                        <% } else {%>
                                            <span>Room Not Available</span>
                                            <% } %>
                                </div>
                                <div class="col"><a class="btn btn-primary btn-lg rounded-pill w-sm-auto w-100"
                                        href="/hotels/<%= hotel._id %>/checkout">Book now<i class="fi-chevron-right fs-sm ms-2"></i></a></div>
                            </div>
                        </div>
                        <!-- Follow-->
                        <div class="d-flex align-items-center">
                            <h4 class="h5 mb-0 me-3">Follow:</h4>
                            <div class="text-nowrap"><a
                                    class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle me-2"
                                    href="#"><i class="fi-facebook"></i></a><a
                                    class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle me-2"
                                    href="#"><i class="fi-instagram"></i></a><a
                                    class="btn btn-icon btn-light-primary btn-xs shadow-sm rounded-circle" href="#"><i
                                        class="fi-twitter"></i></a></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Location (Map)-->
            <div class="col-md-5">
                <div class="h-100 ">
                    <div id="map" class="rounded-3"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page content about section-->
    <section class="container pb-5 mb-md-4" id="aboutHere">
        <div class="row">
            <!-- Left column-->
            <div class="col-md-9 mb-md-0 mb-4 pb-md-0 pb-2">
                <% if (currentUser && hotel.author._id.equals(currentUser._id)) { %>
                <h2>Power of Hotel Author ðŸ‘‡</h2>
                <div class="d-flex mb-5">
                        <a href="/hotels/<%= hotel._id %>/edit" class="btn btn-primary">Edit Hotel</a>
                        <form action="/hotels/<%= hotel._id %>?_method=DELETE" method="post">
                            <input type="submit" value="Delete Hotel" class="btn btn-danger ms-5" />
                        </form>
                    </div>
                    <% } %>
                <h2 class="h4">About</h2>
                <ul class="list-unstyled">
                    <li><i class="fi-star-filled mt-n1 me-1 text-warning align-middle"></i><b><%= hotel.overAllRating %> </b><span
                            class="text-muted">(<%= hotel.reviews.length%> reviews)</span></li>
                    <li><i class="fi-wallet mt-n1 me-1 align-middle opacity-70"></i><%= hotel.price %>&nbsp;&#8377</li>
                    <li><i class="fi-map-pin mt-n1 me-1 align-middle opacity-70"></i><%= hotel.address%></li>
                    <li><i class="fi-like"></i> Total Likes : <%= hotel.upVotes.length %> </li>
                    <li><i class="fi-dislike"></i> Total Dislikes : <%= hotel.downVotes.length %></li>
                </ul>
                <div class="mb-4 pb-md-3">
                    <p class="mb-1">Lorem tincidunt lectus vitae id vulputate diam quam. Imperdiet non scelerisque
                        turpis sed etiam ultrices. Blandit mollis dignissim egestas consectetur porttitor. Vulputate
                        dolor pretium, dignissim eu augue sit ut convallis. Lectus est, magna urna feugiat sed ultricies
                        sed in lacinia. Fusce potenti sit id pharetra vel ornare. Vestibulum sed tellus ullamcorper
                        arcu.</p>
                    <div class="collapse" id="seeMoreAbout">
                        <p class="mb-1">Asperiores eos molestias, aspernatur assumenda vel corporis ex, magni excepturi
                            totam exercitationem quia inventore quod amet labore impedit quae distinctio? Officiis
                            blanditiis consequatur alias, atque, sed est incidunt accusamus repudiandae tempora
                            repellendus obcaecati delectus ducimus inventore tempore harum numquam autem eligendi culpa.
                        </p>
                    </div><a class="collapse-label collapsed" href="#seeMoreAbout" data-bs-toggle="collapse"
                        data-bs-label-collapsed="Show more" data-bs-label-expanded="Show less" role="button"
                        aria-expanded="false" aria-controls="seeMoreAbout"></a>
                </div>
                <!-- Amenities-->
                <div class="mb-4 pb-md-3">
                    <h2 class="h4">Amenities</h2>
                    <ul class="list-unstyled row row-cols-lg-3 row-cols-md-2 row-cols-1 gy-1 mb-1 text-nowrap">
                        <li class="col"><i class="fi-wifi mt-n1 me-2 fs-lg align-middle"></i>Free WiFi</li>
                        <li class="col"><i class="fi-swimming-pool mt-n1 me-2 fs-lg align-middle"></i>2 swimming pools
                        </li>
                        <li class="col"><i class="fi-pet mt-n1 me-2 fs-lg align-middle"></i>Pets-friendly</li>
                        <li class="col"><i class="fi-parking mt-n1 me-2 fs-lg align-middle"></i>Free parking</li>
                        <li class="col"><i class="fi-spa mt-n1 me-2 fs-lg align-middle"></i>Spa lounge</li>
                        <li class="col"><i class="fi-cafe mt-n1 me-2 fs-lg align-middle"></i>Restaurant</li>
                        <li class="col"><i class="fi-hotel-bell mt-n1 me-2 fs-lg align-middle"></i>Room service</li>
                        <li class="col"><i class="fi-cocktail mt-n1 me-2 fs-lg align-middle"></i>Bar</li>
                        <li class="col"><i class="fi-dumbell mt-n1 me-2 fs-lg align-middle"></i>Fitness Center</li>
                    </ul>
                    <div class="collapse" id="seeMoreAmenities">
                        <ul class="list-unstyled row row-cols-lg-3 row-cols-md-2 row-cols-1 gy-1 mb-1 text-nowrap">
                            <li class="col"><i class="fi-dish mt-n1 me-2 fs-lg align-middle"></i>Dishwasher</li>
                            <li class="col"><i class="fi-thermometer mt-n1 me-2 fs-lg align-middle"></i>Heating</li>
                        </ul>
                    </div><a class="collapse-label collapsed" href="#seeMoreAmenities" data-bs-toggle="collapse"
                        data-bs-label-collapsed="Show more" data-bs-label-expanded="Show less" role="button"
                        aria-expanded="false" aria-controls="seeMoreAmenities"></a>
                </div>
                <!-- Room types-->
                <div class="mb-4 pb-md-3">
                    <h2 class="h4">Room types</h2>
                    <ul class="list-unstyled row row-cols-lg-3 row-cols-md-2 row-cols-1 gy-1 mb-1 text-nowrap">
                        <li class="col"><i class="fi-no-smoke mt-n1 me-2 fs-lg align-middle"></i>Non-smoking rooms</li>
                        <li class="col"><i class="fi-single-bed mt-n1 me-2 fs-lg align-middle"></i>Single rooms</li>
                        <li class="col"><i class="fi-double-bed mt-n1 me-2 fs-lg align-middle"></i>Family suites</li>
                    </ul>
                </div>

                <hr class="my-4">
                <!-- Payment-->
                <div class="d-lg-flex align-items-center pb-2 pb-lg-0">
                    <h4 class="fs-lg mb-lg-0">Cards accepted at this hotel:</h4>
                    <div class="ps-lg-3"><img class="me-2 border rounded-1 shadow-sm"
                            src="/img/city-guide/single/payment/visa.svg" width="54" alt="Visa"><img
                            class="me-2 border rounded-1 shadow-sm" src="/img/city-guide/single/payment/mastercard.svg"
                            width="54" alt="Mastercard"><img class="me-2 border rounded-1 shadow-sm"
                            src="/img/city-guide/single/payment/maestro.svg" width="54" alt="Maestro"><img
                            class="border rounded-1 shadow-sm" src="/img/city-guide/single/payment/american-express.svg"
                            width="54" alt="American Express"></div>
                </div>
            </div>

        </div>
    </section>

    <!-- <hr> -->

    <!-- Page content-->
      <!-- Review modal-->
      <div class="modal fade" id="modal-review" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header d-block position-relative border-0 pb-0 px-sm-5 px-4">
              <h3 class="modal-title mt-4 text-center">Leave a review</h3>
              <button class="btn-close position-absolute top-0 end-0 mt-3 me-3" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-sm-5 px-4">
              <form class="needs-validation" action="/hotels/<%= hotel._id %>/reviews"  method="post" novalidate>
                <div class="mb-3">
                  <label class="form-label" for="review-name">Name <span class='text-danger'>*</span></label>
                  <input class="form-control" type="text" id="review-name" placeholder="Your name" required disabled value="<%= currentUser.name%>">
                  <div class="invalid-feedback">Please let us know your name.</div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="review-email">Email <span class='text-danger'>*</span></label>
                  <input class="form-control" type="email" id="review-email" placeholder="Your email address" required disabled value="<%= currentUser.username%>">
                  <div class="invalid-feedback">Please provide a valid email address.</div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="review-rating">Rating <span class='text-danger'>*</span></label>
                  <select class="form-control form-select" id="review-rating" required name="review[rating]">
                    <option value="" selected disabled hidden>Choose rating</option>
                    <option value="5">5 stars</option>
                    <option value="4">4 stars</option>
                    <option value="3">3 stars</option>
                    <option value="2">2 stars</option>
                    <option value="1">1 star</option>
                  </select>
                  <div class="invalid-feedback">Please rate the property.</div>
                </div>
                <div class="mb-4">
                  <label class="form-label" for="review-text">Review <span class='text-danger'>*</span></label>
                  <textarea class="form-control" id="review-text" rows="5" placeholder="Your review message" required name="review[body]"></textarea>
                  <div class="invalid-feedback">Please write your review.</div>
                </div>
                <input type="submit" value="Submit a review" class="btn btn-primary d-block rounded-pill w-100 mb-4" />
              </form>
            </div>
          </div>
        </div>
      </div>


      <!-- Page content-->
      <section class="container pb-5 mb-md-4" id="hotel-review">
        <div class="row">
          <!-- Left column-->
          <div class="col-md-7 mb-md-0 mb-4 pb-md-0 pb-2">
            <h2 class="h4 mb-4">Average rating</h2>

            <% let five = 0 %>
            <% let four = 0 %>
            <% let three = 0 %>
            <% let two = 0 %>
            <% let one = 0 %>
            <% for( let i = 0; i < hotel.reviews.length; i++ ) { %>
                <% switch(hotel.reviews[i].rating) {
                    case 5 :
                        five++
                        break;
                    case 4 :
                        four++
                        break;
                    case 3 :
                        three++
                        three;
                    case 2 :
                        two++
                        break;
                    case 1 :
                        one++
                        break;
                    default :
                        break;
                    }
                %>
            <% } %>

            <div class="row mb-md-5 mb-4">
              <!-- Rating breakdown-->
              <div class="col-sm-8 order-sm-1 order-2">
                <div class="d-flex align-items-center mb-2 fs-sm">
                  <div class="text-nowrap">5<i class="fi-star mt-n1 ms-1 align-middle opacity-70"></i></div>
                  <div class="progress w-100 mx-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= (five*100)/5%>%" aria-valuenow="<%= (five*100)/5%>" aria-valuemin="0" aria-valuemax="5"></div>
                  </div><span style="min-width: 48px;"><%= (five*100)/5%>%</span>
                </div>
                <div class="d-flex align-items-center mb-2 fs-sm">
                  <div class="text-nowrap">4<i class="fi-star mt-n1 ms-1 align-middle opacity-70"></i></div>
                  <div class="progress w-100 mx-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= (four*100)/5%>%" aria-valuenow="<%= (four*100)/5%>" aria-valuemin="0" aria-valuemax="5"></div>
                  </div><span style="min-width: 48px;"><%= (four*100)/5%>%</span>
                </div>
                <div class="d-flex align-items-center mb-2 fs-sm">
                  <div class="text-nowrap">3<i class="fi-star mt-n1 ms-1 align-middle opacity-70"></i></div>
                  <div class="progress w-100 mx-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= (three*100)/5%>%" aria-valuenow="<%= (three*100)/5%>" aria-valuemin="0" aria-valuemax="5"></div>
                  </div><span style="min-width: 48px;"><%= (three*100)/5%>%</span>
                </div>
                <div class="d-flex align-items-center mb-2 fs-sm">
                  <div class="text-nowrap">2<i class="fi-star mt-n1 ms-1 align-middle opacity-70"></i></div>
                  <div class="progress w-100 mx-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= (two*100)/5%>%" aria-valuenow="<%= (two*100)/5%>" aria-valuemin="0" aria-valuemax="5"></div>
                  </div><span style="min-width: 48px;"><%= (two*100)/5%>%</span>
                </div>
                <div class="d-flex align-items-center mb-2 fs-sm">
                  <div class="text-nowrap">1<i class="fi-star mt-n1 ms-1 align-middle opacity-70"></i></div>
                  <div class="progress w-100 mx-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= (one*100)/5%>%" aria-valuenow="<%= (one*100)/5%>" aria-valuemin="0" aria-valuemax="5"></div>
                  </div><span style="min-width: 48px;"><%= (one*100)/5%>%</span>
                </div>
              </div>
              <!-- Score-->
              <div class="col-sm-4 order-sm-2 order-1 mb-sm-0 mb-3 text-center">
                <h5 class="display-4 mb-2"><%= hotel.overAllRating.toFixed(1) %></h5>
                <div><span class="star-rating"><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i></span>
                </div><span class="fs-sm"><%= hotel.reviews.length%> reviews</span>
              </div>
            </div>
            <!-- Add review btn + Reviews sort-->
            <div class="d-flex flex-sm-row flex-column align-items-sm-center justify-content-between mb-4 pb-4 border-bottom"><a class="btn btn-outline-primary rounded-pill mb-sm-0 mb-3" href="#modal-review" data-bs-toggle="modal"><i class="fi-edit mt-n1 me-1 align-middle"></i>Add review</a>
              <div class="d-flex align-items-center ms-sm-4">
                <label class="d-inline-block me-2 pe-1 text-muted text-nowrap" for="reviews-sort"><i class="fi-arrows-sort mt-n1 me-1 align-middle opacity-80"></i>Sort by:</label>
                <select class="form-select" id="reviews-sort" style="min-width: 180px;">
                  <option>Newest</option>
                  <option>Oldest</option>
                  <option>Popular</option>
                  <option>High rating</option>
                  <option>Low rating</option>
                </select>
              </div>
            </div>
            
            <h2>All reviews</h2>
            <% for(let review of hotel.reviews) { %>

            <!-- Review-->
            <div class="mb-4 pb-4 border-bottom">
              <div class="d-flex justify-content-between mb-3">
                <div class="d-flex align-items-center pe-2"><img class="rounded-circle me-1" src="/img/avatars/17.png" width="48" alt="Avatar">
                  <div class="ps-2">
                    <h6 class="fs-base mb-0"><%= review.author.name %></h6>
                    <span class="star-rating" style="height: 20px;">
                        <p class="starability-result" data-rating="<%= review.rating %>"></p>
                    </span>
                  </div>
                </div><span class="text-muted fs-sm"><%= review.createdAt.toDateString()%></span>
              </div>
              <p><%= review.body %>.</p>
              <div class="d-flex align-items-center">
                <button class="btn-like" type="button"><i class="fi-like"></i><span>(3)</span></button>
                <div class="border-end me-1">&nbsp;</div>
                <button class="btn-dislike" type="button"><i class="fi-dislike"></i><span>(0)</span></button>
              </div>
              <% if (currentUser && review.author._id.equals(currentUser._id)) { %>
                <form
                  action="/hotels/<%= hotel._id %>/reviews/<%= review._id %>?_method=DELETE"
                  method="post"
                >
                  <input type="submit" value="Delete" class="btn btn-danger btn-sm mt-4" />
                </form>
    
                <% } %> 
            </div>
            <% } %>

            <!-- Review pagination + Add review btn-->
            <div class="d-flex align-items-center justify-content-between">
              <nav aria-label="Reviews pagination">
                <ul class="pagination mb-0">
                  <li class="page-item d-sm-none"><span class="page-link page-link-static">1 / 8</span></li>
                  <li class="page-item active d-none d-sm-block" aria-current="page"><span class="page-link">1<span class="visually-hidden">(current)</span></span></li>
                  <li class="page-item d-none d-sm-block"><a class="page-link" href="#">2</a></li>
                  <li class="page-item d-none d-sm-block"><a class="page-link" href="#">3</a></li>
                  <li class="page-item d-none d-sm-block">...</li>
                  <li class="page-item d-none d-sm-block"><a class="page-link" href="#">8</a></li>
                  <li class="page-item"><a class="page-link" href="#" aria-label="Next"><i class="fi-chevron-right"></i></a></li>
                </ul>
              </nav><a class="btn btn-outline-primary rounded-pill ms-4" href="#modal-review" data-bs-toggle="modal"><i class="fi-edit mt-n1 me-1 align-middle"></i>Add review</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Recently viewed-->
      <section class="container pb-5 mb-lg-4">
        <div class="d-flex align-items-center justify-content-between mb-4 pb-2">
          <h2 class="h3 mb-0">Recently viewed</h2><a class="btn btn-link fw-normal ms-sm-3 p-0" href="/hotels">View all<i class="fi-arrow-long-right ms-2"></i></a>
        </div>
        <div class="tns-carousel-wrapper tns-controls-outside-xxl tns-nav-outside mb-xxl-2">
          <div class="tns-carousel-inner" data-carousel-options="{&quot;items&quot;: 3, &quot;gutter&quot;: 24, &quot;responsive&quot;: {&quot;0&quot;:{&quot;items&quot;:1,&quot;nav&quot;:true},&quot;500&quot;:{&quot;items&quot;:2},&quot;850&quot;:{&quot;items&quot;:3},&quot;1400&quot;:{&quot;items&quot;:3,&quot;nav&quot;:false}}}">
            <!-- Item-->
            <% for( let i = 0; i < allHotels.length; i++ ) { %>
              <div>
                <div class="position-relative">
                  <div class="position-relative mb-3">
                    <button class="btn btn-icon btn-light-primary btn-xs text-primary rounded-circle position-absolute top-0 end-0 m-3 zindex-5" type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Favorites"><i class="fi-heart"></i></button>
                  <%=  %>
                  <% if (allHotels[i].images.length > 0){ %>
                    <% let randomImage = Math.floor(Math.random() * allHotels[i].images.length )%>
                    <img class="rounded-3" src="<%= allHotels[i].images[randomImage].url %>" alt="Article img" style="height: 195px;width: 428px;">
                  <% } else { %>
                    <img class="rounded-3" src="/Img/no-image-available-icon-6.png" alt="No image provided" style="height: 195px;width: 428px;">
                  <% } %>
                  </div>
                  <h3 class="mb-2 fs-lg"><a class="nav-link stretched-link" href="#"><%= allHotels[i].name %></a></h3>
                  <ul class="list-inline mb-0 fs-xs">
                    <li class="list-inline-item pe-1"><i class="fi-star-filled mt-n1 me-1 fs-base text-warning align-middle"></i><b><%= allHotels[i].overAllRating %></b><span class="text-muted">&nbsp;(<%= allHotels[i].reviews.length%>)</span></li>
                    <li class="list-inline-item pe-1"><i class="fi-credit-card mt-n1 me-1 fs-base text-muted align-middle"></i><%= allHotels[i].price %>&nbsp;$$$</li>
                    <li class="list-inline-item pe-1"><i class="fi-map-pin mt-n1 me-1 fs-base text-muted align-middle"></i><%= allHotels[i].address %></li>
                  </ul>
                </div>
              </div>
              <% } %>

        </div>
    </div>
</section>



    <script src="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js"></script>
    <script>
        // TO MAKE THE MAP APPEAR YOU MUST
        // ADD YOUR ACCESS TOKEN FROM
        // https://account.mapbox.com
        let arr = [];
        arr.push(<%- coordinates[0] %>)
        arr.push(<%- coordinates[1] %>)
        mapboxgl.accessToken = 'pk.eyJ1IjoicGFua2FqYmFsaXlhbiIsImEiOiJjbGc4MXk3NG4wa2IzM2dwa2N3YmQwZ3J3In0.0PB3bXDpLGolEFigFOP1vg';
        const map = new mapboxgl.Map({
            container: 'map', // container ID
            // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
            style: 'mapbox://styles/mapbox/outdoors-v12', // style URL (streets-v12) for normal, (dark-v11) for dark mode
            center: arr, // starting position [lng, lat]
            zoom: 12 // starting zoom
        });
        // Create a default Marker and add it to the map.
        const marker1 = new mapboxgl.Marker()
            .setLngLat(arr)
            .setPopup(new mapboxgl.Popup()
                .setLngLat(arr)
                .setHTML('<h5><%=hotel.name%></h5><p><%=hotel.address%></p>'))
            .addTo(map);
    </script>
    <%- include('../partials/footer.ejs') %>